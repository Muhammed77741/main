# üîç –ê–ù–ê–õ–ò–ó: TP/SL –≤ –ü—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –¥–ª—è –ö—Ä–∏–ø—Ç—ã - Signal Analysis vs Live Bot

## ‚ùì –í–æ–ø—Ä–æ—Å –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

> "—è –≤ –±—ç–∫—Ç–µ—Å—Ç–µ sygnal analysis –¥–ª—è –∫—Ä–∏–ø—Ç—ã —Ç–ø —Å–ª —Å—Ç–∞–≤–ª—é –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö —Ç–∞–º –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è —Ç–ø —Å—Ç–∞–≤–ª—é 1,0% –∞ –≤ live –±–æ—Ç–µ —Ç–∞–∫–∂–µ?"

**–ó–∞–¥–∞—á–∞**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ TP/SL –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –¥–ª—è –∫—Ä–∏–ø—Ç—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤ Signal Analysis (–±—ç–∫—Ç–µ—Å—Ç) –∏ Live Bot.

---

## ‚úÖ –ö–†–ê–¢–ö–ò–ô –û–¢–í–ï–¢

**–î–ê, TP/SL —Ä–∞–±–æ—Ç–∞—é—Ç –ê–ë–°–û–õ–Æ–¢–ù–û –û–î–ò–ù–ê–ö–û–í–û!**

–û–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç:
- ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç
- ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤—É—é –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞
- ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤—É—é —Ñ–æ—Ä–º—É–ª—É –¥–ª—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
- ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫—Ä–∏–ø—Ç—ã

---

## üìä –î–µ—Ç–∞–ª—å–Ω–æ–µ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

### 1Ô∏è‚É£ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã TP/SL

#### Signal Analysis (`trading_app/gui/signal_analysis_dialog.py`)

**–°—Ç—Ä–æ–∫–∏ 32-33** (Take Profit):
```python
CRYPTO_TREND_TP = {'tp1': 1.5, 'tp2': 2.75, 'tp3': 4.5}      # TREND mode
CRYPTO_RANGE_TP = {'tp1': 1.0, 'tp2': 1.75, 'tp3': 2.5}      # RANGE mode
```

**–°—Ç—Ä–æ–∫–∏ 41-42** (Stop Loss):
```python
CRYPTO_TREND_SL = 0.8     # TREND mode: 0.8% stop loss
CRYPTO_RANGE_SL = 0.6     # RANGE mode: 0.6% stop loss
```

#### Live Bot (`trading_bots/xauusd_bot/live_bot_mt5_fullauto.py`)

**–°—Ç—Ä–æ–∫–∏ 78-87** (Take Profit –∏ Stop Loss):
```python
# Crypto TREND mode (strong directional movement)
CRYPTO_TREND_TP1_PCT = 1.5   # 1.5% TP1
CRYPTO_TREND_TP2_PCT = 2.75  # 2.75% TP2
CRYPTO_TREND_TP3_PCT = 4.5   # 4.5% TP3
CRYPTO_TREND_SL_PCT = 0.8    # 0.8% SL

# Crypto RANGE mode (sideways/choppy market)
CRYPTO_RANGE_TP1_PCT = 1.0   # 1.0% TP1
CRYPTO_RANGE_TP2_PCT = 1.75  # 1.75% TP2
CRYPTO_RANGE_TP3_PCT = 2.5   # 2.5% TP3
CRYPTO_RANGE_SL_PCT = 0.6    # 0.6% SL
```

### ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ö–æ–Ω—Å—Ç–∞–Ω—Ç

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Signal Analysis | Live Bot | –°–æ–≤–ø–∞–¥–∞–µ—Ç? |
|----------|----------------|----------|------------|
| **TREND TP1** | 1.5% | 1.5% | ‚úÖ –î–ê |
| **TREND TP2** | 2.75% | 2.75% | ‚úÖ –î–ê |
| **TREND TP3** | 4.5% | 4.5% | ‚úÖ –î–ê |
| **TREND SL** | 0.8% | 0.8% | ‚úÖ –î–ê |
| **RANGE TP1** | 1.0% | 1.0% | ‚úÖ –î–ê |
| **RANGE TP2** | 1.75% | 1.75% | ‚úÖ –î–ê |
| **RANGE TP3** | 2.5% | 2.5% | ‚úÖ –î–ê |
| **RANGE SL** | 0.6% | 0.6% | ‚úÖ –î–ê |

**–í—ã–≤–æ–¥**: ‚úÖ **100% –ò–î–ï–ù–¢–ò–ß–ù–´**

---

## üßÆ –õ–æ–≥–∏–∫–∞ –†–∞—Å—á–µ—Ç–∞

### Signal Analysis (—Å—Ç—Ä–æ–∫–∏ 325-334)

```python
if is_crypto:
    # Crypto uses percentage
    if signal_type == 1:  # BUY
        tp1 = entry_price * (1 + tp_config['tp1'] / 100)
        tp2 = entry_price * (1 + tp_config['tp2'] / 100)
        tp3 = entry_price * (1 + tp_config['tp3'] / 100)
    else:  # SELL
        tp1 = entry_price * (1 - tp_config['tp1'] / 100)
        tp2 = entry_price * (1 - tp_config['tp2'] / 100)
        tp3 = entry_price * (1 - tp_config['tp3'] / 100)
```

### Live Bot (—Å—Ç—Ä–æ–∫–∏ 2598-2608)

```python
if is_crypto:
    # Calculate SL/TP as percentages of entry price
    if last_signal['signal'] == 1:  # LONG
        sl = entry * (1 - sl_pct / 100)
        tp1 = entry * (1 + tp1_pct / 100)
        tp2 = entry * (1 + tp2_pct / 100)
        tp3 = entry * (1 + tp3_pct / 100)
    else:  # SHORT
        sl = entry * (1 + sl_pct / 100)
        tp1 = entry * (1 - tp1_pct / 100)
        tp2 = entry * (1 - tp2_pct / 100)
        tp3 = entry * (1 - tp3_pct / 100)
```

### ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –§–æ—Ä–º—É–ª

| –û–ø–µ—Ä–∞—Ü–∏—è | Signal Analysis | Live Bot | –°–æ–≤–ø–∞–¥–∞–µ—Ç? |
|----------|----------------|----------|------------|
| **BUY TP** | `entry_price * (1 + tp% / 100)` | `entry * (1 + tp_pct / 100)` | ‚úÖ –î–ê |
| **SELL TP** | `entry_price * (1 - tp% / 100)` | `entry * (1 - tp_pct / 100)` | ‚úÖ –î–ê |
| **BUY SL** | `entry_price * (1 - sl% / 100)` | `entry * (1 - sl_pct / 100)` | ‚úÖ –î–ê |
| **SELL SL** | `entry_price * (1 + sl% / 100)` | `entry * (1 + sl_pct / 100)` | ‚úÖ –î–ê |

**–í—ã–≤–æ–¥**: ‚úÖ **–§–û–†–ú–£–õ–´ –ò–î–ï–ù–¢–ò–ß–ù–´**

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –†–∞—Å—á–µ—Ç–∞

### –ü—Ä–∏–º–µ—Ä 1: BTC LONG –≤ RANGE —Ä–µ–∂–∏–º–µ

**–î–∞–Ω–æ**:
- Entry Price: $50,000
- –†–µ–∂–∏–º: RANGE
- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: LONG (BUY)

**–†–∞—Å—á–µ—Ç TP (–∏ –≤ Signal Analysis, –∏ –≤ Live Bot)**:
```
TP1 = $50,000 √ó (1 + 1.0 / 100) = $50,000 √ó 1.01 = $50,500
TP2 = $50,000 √ó (1 + 1.75 / 100) = $50,000 √ó 1.0175 = $50,875
TP3 = $50,000 √ó (1 + 2.5 / 100) = $50,000 √ó 1.025 = $51,250
```

**–†–∞—Å—á–µ—Ç SL (–∏ –≤ Signal Analysis, –∏ –≤ Live Bot)**:
```
SL = $50,000 √ó (1 - 0.6 / 100) = $50,000 √ó 0.994 = $49,700
```

### –ü—Ä–∏–º–µ—Ä 2: ETH SHORT –≤ TREND —Ä–µ–∂–∏–º–µ

**–î–∞–Ω–æ**:
- Entry Price: $3,000
- –†–µ–∂–∏–º: TREND
- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: SHORT (SELL)

**–†–∞—Å—á–µ—Ç TP (–∏ –≤ Signal Analysis, –∏ –≤ Live Bot)**:
```
TP1 = $3,000 √ó (1 - 1.5 / 100) = $3,000 √ó 0.985 = $2,955
TP2 = $3,000 √ó (1 - 2.75 / 100) = $3,000 √ó 0.9725 = $2,917.50
TP3 = $3,000 √ó (1 - 4.5 / 100) = $3,000 √ó 0.955 = $2,865
```

**–†–∞—Å—á–µ—Ç SL (–∏ –≤ Signal Analysis, –∏ –≤ Live Bot)**:
```
SL = $3,000 √ó (1 + 0.8 / 100) = $3,000 √ó 1.008 = $3,024
```

### ‚úÖ –í—ã–≤–æ–¥ –ø–æ –ü—Ä–∏–º–µ—Ä–∞–º

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã **–ü–û–õ–ù–û–°–¢–¨–Æ –°–û–í–ü–ê–î–ê–Æ–¢** –≤ –æ–±–æ–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö!

---

## üîç –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ö—Ä–∏–ø—Ç—ã

### –û–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é: `is_crypto_symbol()`

**–§–∞–π–ª**: `trading_app/gui/format_utils.py`

```python
CRYPTO_KEYWORDS = ['BTC', 'ETH', 'XRP', 'LTC', 'ADA', 'DOT', 'DOGE', 'SOL', 'AVAX', 'MATIC']

def is_crypto_symbol(symbol: str) -> bool:
    """Check if symbol is cryptocurrency"""
    if not symbol:
        return False
    symbol_upper = symbol.upper()
    return any(keyword in symbol_upper for keyword in CRYPTO_KEYWORDS)
```

**Signal Analysis** (—Å—Ç—Ä–æ–∫–∞ 71):
```python
from format_utils import is_crypto_symbol
```

**Live Bot** (—Å—Ç—Ä–æ–∫–∞ 38):
```python
from format_utils import is_crypto_symbol
```

### ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ö—Ä–∏–ø—Ç—ã

**–°–æ–≤–ø–∞–¥–∞–µ—Ç**: ‚úÖ **–î–ê** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞!

---

## üìã –ò—Ç–æ–≥–æ–≤–∞—è –¢–∞–±–ª–∏—Ü–∞ –°—Ä–∞–≤–Ω–µ–Ω–∏—è

| –ê—Å–ø–µ–∫—Ç | Signal Analysis | Live Bot | –°—Ç–∞—Ç—É—Å |
|--------|----------------|----------|--------|
| **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã TP/SL** | CRYPTO_TREND/RANGE_TP/SL | CRYPTO_TREND/RANGE_TP1/2/3_PCT, SL_PCT | ‚úÖ –ò–î–ï–ù–¢–ò–ß–ù–´ |
| **–ó–Ω–∞—á–µ–Ω–∏—è TREND** | TP: 1.5/2.75/4.5%, SL: 0.8% | TP: 1.5/2.75/4.5%, SL: 0.8% | ‚úÖ –ò–î–ï–ù–¢–ò–ß–ù–´ |
| **–ó–Ω–∞—á–µ–Ω–∏—è RANGE** | TP: 1.0/1.75/2.5%, SL: 0.6% | TP: 1.0/1.75/2.5%, SL: 0.6% | ‚úÖ –ò–î–ï–ù–¢–ò–ß–ù–´ |
| **–§–æ—Ä–º—É–ª–∞ BUY TP** | `entry * (1 + tp% / 100)` | `entry * (1 + tp% / 100)` | ‚úÖ –ò–î–ï–ù–¢–ò–ß–ù–´ |
| **–§–æ—Ä–º—É–ª–∞ SELL TP** | `entry * (1 - tp% / 100)` | `entry * (1 - tp% / 100)` | ‚úÖ –ò–î–ï–ù–¢–ò–ß–ù–´ |
| **–§–æ—Ä–º—É–ª–∞ BUY SL** | `entry * (1 - sl% / 100)` | `entry * (1 - sl% / 100)` | ‚úÖ –ò–î–ï–ù–¢–ò–ß–ù–´ |
| **–§–æ—Ä–º—É–ª–∞ SELL SL** | `entry * (1 + sl% / 100)` | `entry * (1 + sl% / 100)` | ‚úÖ –ò–î–ï–ù–¢–ò–ß–ù–´ |
| **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫—Ä–∏–ø—Ç—ã** | `is_crypto_symbol()` | `is_crypto_symbol()` | ‚úÖ –û–î–ù–ê –§–£–ù–ö–¶–ò–Ø |
| **–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª** | `format_utils.py` | `format_utils.py` | ‚úÖ –û–î–ò–ù –§–ê–ô–õ |

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –í–´–í–û–î

### –î–ê, TP/SL –¥–ª—è –∫—Ä–∏–ø—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ê–ë–°–û–õ–Æ–¢–ù–û –û–î–ò–ù–ê–ö–û–í–û!

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞**:

1. ‚úÖ **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–¥–µ–Ω—Ç–∏—á–Ω—ã** (1.0%, 1.5%, 2.75%, 4.5%, 0.6%, 0.8%)
2. ‚úÖ **–§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã**
3. ‚úÖ **–õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫—Ä–∏–ø—Ç—ã –∏–¥–µ–Ω—Ç–∏—á–Ω–∞**
4. ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–¥** (`format_utils.py`)

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –¥–ª—è –≤–∞—Å**:

- ‚úÖ –ö–æ–≥–¥–∞ –≤—ã –≤ Signal Analysis —Å—Ç–∞–≤–∏—Ç–µ **TP1 = 1.0%** –¥–ª—è –∫—Ä–∏–ø—Ç—ã –≤ RANGE —Ä–µ–∂–∏–º–µ, Live Bot –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ç–æ—á–Ω–æ —Ç–µ –∂–µ 1.0%**
- ‚úÖ –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—ç–∫—Ç–µ—Å—Ç–∞ **—Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç** —Ç–æ–º—É, —á—Ç–æ —Å–¥–µ–ª–∞–µ—Ç Live Bot
- ‚úÖ –ù–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–µ–∂–¥—É Signal Analysis –∏ Live Bot –¥–ª—è –∫—Ä–∏–ø—Ç—ã
- ‚úÖ –ú–æ–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –±—ç–∫—Ç–µ—Å—Ç–∞

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ó–Ω–∞—á–µ–Ω–∏—è—Ö

–í Signal Analysis –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞–≤–∞—Ç—å **–∫–∞—Å—Ç–æ–º–Ω—ã–µ TP/SL** —á–µ—Ä–µ–∑ GUI:

```python
if self.custom_tp_levels:
    # Use custom TP levels from GUI
    if regime == 'TREND':
        tp_config = self.custom_tp_levels['trend']
    else:
        tp_config = self.custom_tp_levels['range']
```

**–í–∞–∂–Ω–æ**: –ï—Å–ª–∏ –≤—ã –≤—Ä—É—á–Ω—É—é –º–µ–Ω—è–µ—Ç–µ TP/SL –≤ Signal Analysis –Ω–∞ –¥—Ä—É–≥–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.0% –≤–º–µ—Å—Ç–æ 1.5%), —Ç–æ Live Bot –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å–≤–æ–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**, –µ—Å–ª–∏ –≤—ã –Ω–µ –∏–∑–º–µ–Ω–∏—Ç–µ –∏—Ö –≤ –∫–æ–¥–µ Live Bot.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è TP/SL, –∏–∑–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ Live Bot —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –§–∞–π–ª—ã

### –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **Signal Analysis**:
   - `trading_app/gui/signal_analysis_dialog.py` (—Å—Ç—Ä–æ–∫–∏ 32-46, 325-375)

2. **Live Bot**:
   - `trading_bots/xauusd_bot/live_bot_mt5_fullauto.py` (—Å—Ç—Ä–æ–∫–∏ 78-87, 2583-2612)

3. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫—Ä–∏–ø—Ç—ã**:
   - `trading_app/gui/format_utils.py` (—Ñ—É–Ω–∫—Ü–∏—è `is_crypto_symbol()`)

---

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 2026-01-28  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–ù–ê–õ–ò–ó –ó–ê–í–ï–†–®–ï–ù - –ü–û–õ–ù–û–ï –°–û–í–ü–ê–î–ï–ù–ò–ï –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û
