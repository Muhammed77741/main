# üìä –ê–ù–ê–õ–ò–ó –î–õ–Ø –£–í–ï–õ–ò–ß–ï–ù–ò–Ø –ü–†–ò–ë–´–õ–ò

## –¢–µ–∫—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- Total PnL: **+42.60%** (–∑–∞ 1.6 –≥–æ–¥–∞)
- –°–¥–µ–ª–æ–∫: 343
- Win Rate: 65.0%
- Profit Factor: 1.43
- Max DD: -13.13%
- **Risk/Reward: 0.77** ‚ùå (–∫—Ä–∏—Ç–∏—á–Ω–æ –Ω–∏–∑–∫–∏–π!)

---

## üö® 7 –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ü–†–û–ë–õ–ï–ú

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 1: TIMEOUT –£–ë–ò–í–ê–ï–¢ –ü–†–ò–ë–´–õ–¨

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **127 —Å–¥–µ–ª–æ–∫** (37% –≤—Å–µ—Ö!) –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ —Ç–∞–π–º–∞—É—Ç—É
- –û–±—â–∏–π —É–±—ã—Ç–æ–∫: **-16.59%**
- Avg —É–±—ã—Ç–æ–∫: -0.13% –Ω–∞ —Å–¥–µ–ª–∫—É
- –í—ã–∏–≥—Ä—ã—à–∏: 52 —Å–¥–µ–ª–∫–∏ (+29.47%)
- –ü—Ä–æ–∏–≥—Ä—ã—à–∏: **75 —Å–¥–µ–ª–æ–∫ (-46.06%)** ‚Üê –æ—Å–Ω–æ–≤–Ω–∞—è –ø–æ—Ç–µ—Ä—è!

**–ü—Ä–æ–±–ª–µ–º–∞:**
–°–¥–µ–ª–∫–∏ –≤–∏—Å—è—Ç —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ –∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å –º–∞–ª–µ–Ω—å–∫–∏–º —É–±—ã—Ç–∫–æ–º –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –¥–∞—Ç—å —Ü–µ–Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
```
–¢–µ–∫—É—â–∏–µ —Ç–∞–π–º–∞—É—Ç—ã:
- LONG TREND: 60—á
- LONG RANGE: 48—á
- SHORT TREND: 24—á

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ:
- LONG TREND: 36—á (-40%)
- LONG RANGE: 24—á (-50%)
- SHORT TREND: 18—á (-25%)
```

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** +15-20% PnL

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 2: –î–û–õ–ì–ò–ï –°–î–ï–õ–ö–ò –£–ë–´–¢–û–ß–ù–´

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –°–¥–µ–ª–∫–∏ >48—á: 93 (27.1%)
- Total PnL: **-18.77%**
- Avg: -0.20% –Ω–∞ —Å–¥–µ–ª–∫—É

**–ê–Ω–∞–ª–∏–∑ –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
| –ì—Ä—É–ø–ø–∞ | –°–¥–µ–ª–æ–∫ | PnL | Avg PnL |
|--------|--------|-----|---------|
| <5—á | 41 | +8.03% | +0.20% |
| 5-24—á | 120 | **+35.52%** | +0.30% ‚úÖ |
| 24-48—á | 89 | +17.83% | +0.20% |
| >48—á | 93 | **-18.77%** | -0.20% ‚ùå |

**–í—ã–≤–æ–¥:** –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 5-24—á!

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Å–µ —Ç–∞–π–º–∞—É—Ç—ã –¥–æ 24-36—á –º–∞–∫—Å–∏–º—É–º
- –î–æ–±–∞–≤–∏—Ç—å "early exit" –µ—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–µ –¥–≤–∏–∂–µ—Ç—Å—è –≤ –Ω—É–∂–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ 12—á

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** +10-12% PnL

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 3: STOP LOSS –°–õ–ò–®–ö–û–ú –ê–ì–†–ï–°–°–ò–í–ù–´–ô

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- SL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç: 47 —Å–¥–µ–ª–æ–∫ (13.7%)
- Total —É–±—ã—Ç–æ–∫: **-53.01%** ‚Üê —Å–∞–º—ã–µ –±–æ–ª—å—à–∏–µ –ø–æ—Ç–µ—Ä–∏!
- Avg: **-1.13%** –Ω–∞ —Å–¥–µ–ª–∫—É (–≤ 2x –±–æ–ª—å—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –≤—ã–∏–≥—Ä—ã—à–∞!)

**–†–∞–∑–±–∏–≤–∫–∞:**
- LONG SL: 46 —Å–¥–µ–ª–æ–∫, -53.14%
- SHORT SL: 1 —Å–¥–µ–ª–∫–∞, +0.13%

**–ü—Ä–æ–±–ª–µ–º–∞:**
SL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ **–±–ª–∏–∂–∞–π—à–µ–º** swing point - —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ entry!

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –¢–ï–ö–£–©–ò–ô –ö–û–î (—Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ):
recent_swings = all_swing_lows[...].tail(20)
stop = recent_swings['low'].iloc[-1]  # –ü–æ—Å–ª–µ–¥–Ω–∏–π swing

# –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø:
stop = recent_swings['low'].iloc[-2]  # –í—Ç–æ—Ä–æ–π swing (–¥–∞–ª—å—à–µ)
# –ò–õ–ò
stop = recent_swings['low'].min()  # –ú–∏–Ω–∏–º—É–º –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5
```

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö SL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- +8-10% PnL

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 4: –ü–õ–û–•–û–ô RISK/REWARD RATIO

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- Avg Win: **+0.64%**
- Avg Loss: **-0.83%**
- **R:R Ratio: 0.77** ‚ùå (–Ω–æ—Ä–º–∞ >1.5!)

**–ü–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º:**
- LONG R:R: 0.80
- SHORT R:R: 0.47 ‚ùå‚ùå

**–ü—Ä–æ–±–ª–µ–º–∞:**
TP —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ - —Å–¥–µ–ª–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —Ä–∞–Ω—å—à–µ —á–µ–º —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è —Ç—Ä–µ–Ω–¥!

**–¢–µ–∫—É—â–∏–µ TP:**
```
LONG TREND: TP1=30–ø, TP2=55–ø, TP3=90–ø
LONG RANGE: TP1=20–ø, TP2=35–ø, TP3=50–ø
SHORT TREND: TP1=15–ø, TP2=25–ø, TP3=35–ø
```

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ TP (+30%):**
```
LONG TREND: TP1=40–ø, TP2=70–ø, TP3=120–ø
LONG RANGE: TP1=25–ø, TP2=45–ø, TP3=65–ø
SHORT TREND: TP1=20–ø, TP2=35–ø, TP3=50–ø
```

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- R:R —É–≤–µ–ª–∏—á–∏—Ç—Å—è –¥–æ 1.2-1.5
- +15-20% PnL

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 5: SHORT –ü–û–ß–¢–ò –ë–ï–°–ü–û–õ–ï–ó–ï–ù

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –°–¥–µ–ª–æ–∫: 31 (9% –≤—Å–µ—Ö)
- Win Rate: 67.7% (–Ω–µ–ø–ª–æ—Ö–æ!)
- Total PnL: **-0.13%** ‚ùå
- Avg PnL: -0.00%
- R:R: 0.47 ‚ùå‚ùå

**–ü—Ä–æ–±–ª–µ–º–∞:**
SHORT –∏–º–µ–µ—Ç –ø–ª–æ—Ö–æ–π R:R - –¥–∞–∂–µ –ø—Ä–∏ 67% WR –Ω–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç –ø—Ä–∏–±—ã–ª–∏!

**–†–µ—à–µ–Ω–∏–µ 1: –û–¢–ö–õ–Æ–ß–ò–¢–¨ SHORT**
```python
# –í backtest_v3_short_optimized.py
self.short_range_enabled = False  # –£–∂–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ
# –î–æ–±–∞–≤–∏—Ç—å:
self.short_trend_enabled = False  # –û–¢–ö–õ–Æ–ß–ò–¢–¨ –ü–û–õ–ù–û–°–¢–¨–Æ
```
**–≠—Ñ—Ñ–µ–∫—Ç:** +0.13% (–Ω–µ–±–æ–ª—å—à–æ–π, –Ω–æ –±–µ–∑ —Ä–∏—Å–∫–∞)

**–†–µ—à–µ–Ω–∏–µ 2: –£–õ–£–ß–®–ò–¢–¨ SHORT**
```python
# –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è SHORT:
# 1. –¢–æ–ª—å–∫–æ –≤ —Å–∏–ª—å–Ω–æ–º –¥–∞—É–Ω—Ç—Ä–µ–Ω–¥–µ (3+ BOS –≤–Ω–∏–∑)
# 2. –£–≤–µ–ª–∏—á–∏—Ç—å TP –≤ 2x:
self.short_trend_tp1 = 30  # –ë—ã–ª–æ 15
self.short_trend_tp2 = 50  # –ë—ã–ª–æ 25
self.short_trend_tp3 = 70  # –ë—ã–ª–æ 35
```

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 6: –ú–ê–õ–û –î–û–°–¢–ò–ì–ê–Æ–¢ TP3

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- TP1 hits: 195 (56.9%) ‚úÖ
- TP2 hits: 50 (14.6%)
- TP3 hits: **11 (3.2%)** ‚ùå
- Trailing: 195 (56.9%)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–¢–æ–ª—å–∫–æ 3% —Å–¥–µ–ª–æ–∫ –¥–æ—Å—Ç–∏–≥–∞—é—Ç TP3 - —Å–ª–∏—à–∫–æ–º –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ!

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç —á–∞—Å—Ç–∏—á–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π:
# –¢–ï–ö–£–©–ò–ô:
close_pct1 = 0.50  # –ó–∞–∫—Ä—ã—Ç—å 50% –Ω–∞ TP1
close_pct2 = 0.30  # –ó–∞–∫—Ä—ã—Ç—å 30% –Ω–∞ TP2
# –û—Å—Ç–∞—Ç–æ–∫: 20% –Ω–∞ TP3

# –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô:
close_pct1 = 0.30  # –ó–∞–∫—Ä—ã—Ç—å 30% –Ω–∞ TP1
close_pct2 = 0.30  # –ó–∞–∫—Ä—ã—Ç—å 30% –Ω–∞ TP2
# –û—Å—Ç–∞—Ç–æ–∫: 40% –Ω–∞ TP3 (–≤ 2x –±–æ–ª—å—à–µ!)
```

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** –ë–æ–ª—å—à–µ –ø—Ä–∏–±—ã–ª–∏ –æ—Ç –±–æ–ª—å—à–∏—Ö –¥–≤–∏–∂–µ–Ω–∏–π

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 7: TREND –°–õ–ê–ë–ï–ï RANGE

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
| –†–µ–∂–∏–º | –°–¥–µ–ª–æ–∫ | PnL |
|-------|--------|-----|
| TREND | 138 | **+7.20%** |
| RANGE | 205 | **+35.40%** ‚Üê –≤ 5x –ª—É—á—à–µ! |

**–ü—Ä–æ–±–ª–µ–º–∞:**
TREND –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤ 5 —Ä–∞–∑ —Ö—É–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ–º RANGE!

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. TREND –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ (–±–æ–ª—å—à–∏–µ TP)
2. TREND —Å–∏–≥–Ω–∞–ª—ã –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–µ
3. RANGE –∏–º–µ–µ—Ç –º–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–æ–µ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –í–ê–†–ò–ê–ù–¢ 1: –°–¥–µ–ª–∞—Ç—å TREND –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–º
self.long_trend_tp1 = 20  # –ë—ã–ª–æ 30 (–∫–∞–∫ RANGE)
self.long_trend_tp2 = 35  # –ë—ã–ª–æ 55
self.long_trend_tp3 = 60  # –ë—ã–ª–æ 90

# –í–ê–†–ò–ê–ù–¢ 2: –£–≤–µ–ª–∏—á–∏—Ç—å TP –¥–ª—è RANGE (–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ!)
self.long_range_tp1 = 30  # –ë—ã–ª–æ 20
self.long_range_tp2 = 50  # –ë—ã–ª–æ 35
self.long_range_tp3 = 75  # –ë—ã–ª–æ 50
```

---

## ‚úÖ –ü–õ–ê–ù –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### –§–∞–∑–∞ 1: –ë—ã—Å—Ç—Ä—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç: +20-25%)

1. **–°–æ–∫—Ä–∞—Ç–∏—Ç—å TIMEOUT**
   - LONG TREND: 60—á ‚Üí 36—á
   - LONG RANGE: 48—á ‚Üí 24—á
   - **–≠—Ñ—Ñ–µ–∫—Ç:** +15%

2. **–†–∞—Å—à–∏—Ä–∏—Ç—å STOP LOSS**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 2-–π swing –≤–º–µ—Å—Ç–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ
   - **–≠—Ñ—Ñ–µ–∫—Ç:** +8%

3. **–û—Ç–∫–ª—é—á–∏—Ç—å SHORT**
   - `self.short_trend_enabled = False`
   - **–≠—Ñ—Ñ–µ–∫—Ç:** +0.13%

### –§–∞–∑–∞ 2: –°—Ä–µ–¥–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç: +15-20%)

4. **–£–≤–µ–ª–∏—á–∏—Ç—å TP (+30%)**
   - LONG TREND: 40/70/120–ø
   - LONG RANGE: 25/45/65–ø
   - **–≠—Ñ—Ñ–µ–∫—Ç:** +15%

5. **–ò–∑–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è**
   - TP1: 50% ‚Üí 30%
   - TP2: 30% ‚Üí 30%
   - TP3: 20% ‚Üí 40%
   - **–≠—Ñ—Ñ–µ–∫—Ç:** +5%

### –§–∞–∑–∞ 3: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç RANGE (–æ–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç: +10-15%)

6. **–£–≤–µ–ª–∏—á–∏—Ç—å TP –¥–ª—è RANGE**
   - RANGE TP: 30/50/75–ø
   - –û—Å—Ç–∞–≤–∏—Ç—å TREND –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–º
   - **–≠—Ñ—Ñ–µ–∫—Ç:** +10%

---

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

**–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- Total PnL: +42.60%
- Win Rate: 65.0%
- Profit Factor: 1.43
- R:R: 0.77

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ø—Ä–æ–≥–Ω–æ–∑):**
- Total PnL: **+90-110%** (+50-70%)
- Win Rate: 62-64% (–º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å—Å—è –Ω–µ–º–Ω–æ–≥–æ)
- Profit Factor: **2.5-3.0**
- R:R: **1.5-2.0** ‚úÖ

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `backtest_v4_optimized.py` —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. ‚è≥ –ó–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫—Ç–µ—Å—Ç –Ω–∞ —Ç–æ–º –∂–µ –¥–∞—Ç–∞—Å–µ—Ç–µ
3. ‚è≥ –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã v3 vs v4
4. ‚è≥ –ï—Å–ª–∏ —É–ª—É—á—à–µ–Ω–∏–µ >50% - –≤–Ω–µ–¥—Ä—è—Ç—å –≤ –ø—Ä–æ–¥

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-01-03
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
