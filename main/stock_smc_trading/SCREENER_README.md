# Stock Screener —Å Backtesting

–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π stock screener –±–µ–∑ pattern recognition, —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

## –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### ‚úÖ –£–¥–∞–ª–µ–Ω–æ
- `stock_pattern_recognition_strategy.py` - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- `test_pattern_recognition.py` - —Ç–µ—Å—Ç—ã –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- `test_4h_pattern.py` - —Ç–µ—Å—Ç—ã 4-—á–∞—Å–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

### ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω–æ
- `stock_screener.py` - **–æ—Å–Ω–æ–≤–Ω–æ–π screener** –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞–∫—Ü–∏–π —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º —Ä–æ—Å—Ç–∞

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
- `screener_backtest.py` - **backtester** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Stock Screener

Screener –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∞–∫—Ü–∏–∏ –ø–æ 5 –∫—Ä–∏—Ç–µ—Ä–∏—è–º (–≤—Å–µ–≥–æ 100 –±–∞–ª–ª–æ–≤):

1. **Momentum (0-30)** - —Å–∏–ª–∞ –∏ –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ —Ä–æ—Å—Ç–∞
2. **Relative Strength (0-25)** - –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—Å—Ç–≤–æ –Ω–∞–¥ —Ä—ã–Ω–∫–æ–º (S&P500)
3. **Trend Quality (0-20)** - —á–∏—Å—Ç–æ—Ç–∞ —Ç—Ä–µ–Ω–¥–∞
4. **Volume (0-15)** - –∏–Ω—Å—Ç–∏—Ç—É—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏
5. **Risk/Reward (0-10)** - –∫–∞—á–µ—Å—Ç–≤–æ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–Ω–∏–Ω–≥ (–Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–ø –∞–∫—Ü–∏–∏ –°–ï–ô–ß–ê–°)

```python
from stock_screener import StockScreener

# –°–æ–∑–¥–∞—Ç—å screener
screener = StockScreener(
    lookback_days=180,  # –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 180 –¥–Ω–µ–π
    min_score=60,       # –ú–∏–Ω–∏–º—É–º 60 –±–∞–ª–ª–æ–≤
    top_n=10            # –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ø-10
)

# –°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
tickers = ['AAPL', 'MSFT', 'NVDA', 'TSLA', 'AMD', 'GOOGL']

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–Ω–∏–Ω–≥
results = screener.screen_multiple(tickers)

# –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
screener.print_results(results)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–æ–ø-10 –∞–∫—Ü–∏–π —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º —Ä–æ—Å—Ç–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

### 2. Backtesting (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö)

```python
from datetime import datetime, timedelta
from stock_screener import StockScreener
from screener_backtest import ScreenerBacktester

# –°–æ–∑–¥–∞—Ç—å screener
screener = StockScreener(
    lookback_days=180,
    min_score=60,
    top_n=10
)

# –°–æ–∑–¥–∞—Ç—å backtester
backtester = ScreenerBacktester(
    screener=screener,
    backtest_periods=[30, 60, 90],  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ—Å—Ç —á–µ—Ä–µ–∑ 30, 60, 90 –¥–Ω–µ–π
    top_n_signals=5                  # –¢–æ–ø-5 —Å–∏–≥–Ω–∞–ª–æ–≤ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–∫—Ä–∏–Ω–∏–Ω–≥–µ
)

# –ü–µ—Ä–∏–æ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
end_date = datetime.now() - timedelta(days=100)  # –û—Å—Ç–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ –¥–ª—è –±—É–¥—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
start_date = end_date - timedelta(days=365*2)    # 2 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥

# –°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π
tickers = ['AAPL', 'MSFT', 'NVDA', 'TSLA', 'AMD']

# –ó–∞–ø—É—Å—Ç–∏—Ç—å backtest
results = backtester.run_backtest(
    start_date=start_date,
    end_date=end_date,
    tickers=tickers,
    frequency_days=30  # –°–∫—Ä–∏–Ω–∏—Ç—å –∫–∞–∂–¥—ã–µ 30 –¥–Ω–µ–π
)

# –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
backtester.analyze_results(results)

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
results.to_csv('backtest_results.csv', index=False)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ screener –¥–∞–≤–∞–ª —Å–∏–≥–Ω–∞–ª –Ω–∞ –ø–æ–∫—É–ø–∫—É
- –ù–∞—Å–∫–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –≤—ã—Ä–∞—Å—Ç–∞–ª–∞ –∞–∫—Ü–∏—è —á–µ—Ä–µ–∑ 30/60/90 –¥–Ω–µ–π
- Win rate (–ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤)
- –õ—É—á—à–∏–µ –∏ —Ö—É–¥—à–∏–µ —Å–¥–µ–ª–∫–∏

### 3. –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ backtesting

```
üìä Total signals: 45

üìÖ 30-Day Hold Period:
   Win Rate: 73.3% (33 wins, 12 losses)
   Avg Return: +8.5%
   Avg Win: +12.3%
   Avg Loss: -3.2%
   Best Trade: +45.7%
   Worst Trade: -8.9%

üìÖ 60-Day Hold Period:
   Win Rate: 77.8% (35 wins, 10 losses)
   Avg Return: +12.1%
   Avg Win: +18.4%
   Avg Loss: -4.1%
   Best Trade: +67.2%
   Worst Trade: -11.3%

üèÜ TOP 10 BEST TRADES (30-day returns)
   NVDA   | 2023-06-15 | $385.50 | Score: 87 | Return: +45.7%
   AMD    | 2023-08-01 | $108.20 | Score: 82 | Return: +38.2%
   TSLA   | 2023-05-10 | $165.30 | Score: 79 | Return: +32.5%
   ...
```

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–Ω–∏–Ω–≥:
```bash
python3 stock_screener.py
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å backtest:
```bash
python3 screener_backtest.py
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç:
```bash
python3 test_screener_backtest.py
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

```bash
pip install pandas numpy yfinance matplotlib
```

–ò–ª–∏:
```bash
pip install -r requirements.txt
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### Stock Screener
1. –°–∫–∞—á–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–π –∞–∫—Ü–∏–∏
2. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (EMA, volume, momentum)
3. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å —Ä—ã–Ω–∫–æ–º (SPY)
4. –í—ã—Å—Ç–∞–≤–ª—è–µ—Ç –±–∞–ª–ª—ã –ø–æ –∫–∞–∂–¥–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ø-N –∞–∫—Ü–∏–π —Å –Ω–∞–∏–≤—ã—Å—à–∏–º–∏ –±–∞–ª–ª–∞–º–∏

### Backtester
1. "–ü—É—Ç–µ—à–µ—Å—Ç–≤—É–µ—Ç –≤–æ –≤—Ä–µ–º–µ–Ω–∏" –≤ –ø—Ä–æ—à–ª–æ–µ
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç screener –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –¥–∞—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü)
3. –ë–µ—Ä–µ—Ç —Ç–æ–ø-5 –∞–∫—Ü–∏–π (—Å–∏–≥–Ω–∞–ª—ã –Ω–∞ –ø–æ–∫—É–ø–∫—É)
4. –°–º–æ—Ç—Ä–∏—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω–∏ –≤—ã—Ä–æ—Å–ª–∏ —á–µ—Ä–µ–∑ 30/60/90 –¥–Ω–µ–π
5. –°—á–∏—Ç–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: win rate, —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Ñ–∏—Ç, –ª—É—á—à–∏–µ/—Ö—É–¥—à–∏–µ —Å–¥–µ–ª–∫–∏

## –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é:**
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ screener –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∞–∫—Ü–∏—è—Ö
   - –ü–æ–ª—É—á–∞–µ—Ç–µ —Ç–æ–ø-10 —Å –Ω–∞–∏–≤—ã—Å—à–∏–º–∏ –±–∞–ª–ª–∞–º–∏
   - –≠—Ç–æ –≤–∞—à watchlist

2. **–†–µ—à–µ–Ω–∏–µ –æ –ø–æ–∫—É–ø–∫–µ:**
   - –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ score (—á–µ–º –≤—ã—à–µ, —Ç–µ–º –ª—É—á—à–µ)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –¥–µ—Ç–∞–ª–∏: beating_market, ema_aligned, volume_increasing
   - –ï—Å–ª–∏ score > 70 –∏ –≤—Å–µ —Ñ–ª–∞–≥–∏ ‚úÖ - —Å–∏–ª—å–Ω—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç

3. **Backtest –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏:**
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ backtester –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 2 –≥–æ–¥–∞—Ö
   - –°–º–æ—Ç—Ä–∏—Ç–µ win rate –∏ avg return
   - –ï—Å–ª–∏ win rate > 70% –∏ avg return > 10% - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- ‚ö†Ô∏è **–≠—Ç–æ –Ω–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Å–æ–≤–µ—Ç!** –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- ‚ö†Ô∏è **Backtesting –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—à–ª—ã–µ –¥–∞–Ω–Ω—ã–µ** - –ø—Ä–æ—à–ª—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –±—É–¥—É—â–∏–µ
- ‚ö†Ô∏è **–ù—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç** - screener —Å–∫–∞—á–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ yfinance
- ‚úÖ **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** - min_score, lookback_days, top_n –ø–æ–¥ —Å–≤–æ–π —Å—Ç–∏–ª—å
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏** - –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞ backtest –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ–π
