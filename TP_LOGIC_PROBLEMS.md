# ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ —Å TP –≤ Live Bot

## üîç –ö–∞–∫ –°–ï–ô–ß–ê–° —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∞—à bot:

### 1. –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∞ 429-436)
```python
result = self.send_market_order(
    symbol=self.symbol,
    order_type=order_type,
    volume=lot_size,
    sl=stop_loss,      # ‚úÖ SL —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ MT5
    tp=None,           # ‚ùå TP –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!
    comment=f"V9_{direction}_{regime}"
)
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- ‚úÖ SL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ MT5 - –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7
- ‚ùå TP –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –±–æ—Ç —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ä—É—á–Ω—É—é
- üìù TP —É—Ä–æ–≤–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –¢–û–õ–¨–ö–û –≤ –ø–∞–º—è—Ç–∏ –±–æ—Ç–∞ (tp1_price, tp2_price, tp3_price)

### 2. –î–≤–∞ –ø–æ—Ç–æ–∫–∞ —Ä–∞–±–æ—Ç—ã:

**–ü–æ—Ç–æ–∫ A: Main Loop (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤)**
- –ß–∞—Å—Ç–æ—Ç–∞: **–∫–∞–∂–¥—ã–π –ß–ê–°** (check_interval = 3600s)
- –ó–∞–¥–∞—á–∞: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ SMC —Å–∏–≥–Ω–∞–ª—ã
- –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏!

**–ü–æ—Ç–æ–∫ B: Position Monitor (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π)**
- –ß–∞—Å—Ç–æ—Ç–∞: **–∫–∞–∂–¥—É—é –ú–ò–ù–£–¢–£** (sleep 60s)
- –ó–∞–¥–∞—á–∞: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å TP/SL/Trailing –¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –°—Ç—Ä–æ–∫–∞ 542-552:
```python
while self.position_monitor_running:
    with self.open_positions_lock:
        for position in self.open_positions[:]:
            self.check_position(position)  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏
    time.sleep(60)  # ‚ùå –°–ø–∏—Ç 1 –º–∏–Ω—É—Ç—É –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏!
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ TP (—Å—Ç—Ä–æ–∫–∏ 602-634) - **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê!**

```python
if direction == 'LONG':
    if not position['tp3_hit'] and current_price >= position['tp3_price']:
        # –ó–∞–∫—Ä—ã—Ç—å TP3 (40%)
        position['tp3_hit'] = True

    elif not position['tp2_hit'] and current_price >= position['tp2_price']:  # ‚Üê elif!
        # –ó–∞–∫—Ä—ã—Ç—å TP2 (30%)
        position['tp2_hit'] = True

    elif not position['tp1_hit'] and current_price >= position['tp1_price']:  # ‚Üê elif!
        # –ó–∞–∫—Ä—ã—Ç—å TP1 (30%)
        position['tp1_hit'] = True
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç `elif` –≤–º–µ—Å—Ç–æ `if`!**

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê #1: –ü—Ä–æ–ø—É—Å–∫ TP –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π:
```
09:00:00 - –ü–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞, Entry = 2650
           TP1 = 2685, TP2 = 2715, TP3 = 2750

09:00:30 - –ë–æ—Ç —Å–ø–∏—Ç (sleep 60s)
09:00:45 - –¶–µ–Ω–∞ = 2720 (–ø—Ä–æ—à–ª–∞ TP1 –∏ TP2!)
09:01:00 - –ë–æ—Ç –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é

–ü—Ä–æ–≤–µ—Ä–∫–∞:
1. current_price (2720) >= tp3_price (2750)? –ù–ï–¢
2. current_price (2720) >= tp2_price (2715)? –î–ê! ‚úÖ
   ‚Üí –ó–∞–∫—Ä—ã–≤–∞–µ—Ç 30% –ø–æ TP2
   ‚Üí –í—ã—Ö–æ–¥–∏—Ç –∏–∑ if-elif-elif (–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç TP1!)

–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå TP1 –ü–†–û–ü–£–©–ï–ù!
```

**–ò–∑-–∑–∞ `elif` –∑–∞ –æ–¥–Ω—É –ø—Ä–æ–≤–µ—Ä–∫—É –º–æ–∂–µ—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å –¢–û–õ–¨–ö–û –û–î–ò–ù TP!**

–ï—Å–ª–∏ —Ü–µ–Ω–∞ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ—à–ª–∞ –æ—Ç TP1 –¥–æ TP2:
- ‚ùå TP1 –Ω–µ –∑–∞–∫—Ä—ã–ª—Å—è
- ‚úÖ TP2 –∑–∞–∫—Ä—ã–ª—Å—è
- ‚ùå –ù–µ–¥–æ–∑–∞–∫—Ä—ã–ª–∏ 30% –ø–æ–∑–∏—Ü–∏–∏!

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê #2: –û—Ç–∫–∞—Ç —Ü–µ–Ω—ã –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π:
```
09:00:00 - –ü–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞, Entry = 2650, TP1 = 2685
09:00:30 - –ë–æ—Ç —Å–ø–∏—Ç
09:00:45 - –¶–µ–Ω–∞ = 2687 (TP1 –¥–æ—Å—Ç–∏–≥–Ω—É—Ç!) üìà
09:00:50 - –ù–æ–≤–æ—Å—Ç–∏! –¶–µ–Ω–∞ –æ—Ç–∫–∞—Ç–∏–ª–∞—Å—å = 2670 üìâ
09:01:00 - –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: current_price (2670) >= tp1 (2685)? –ù–ï–¢

–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå TP1 –¥–æ—Å—Ç–∏–≥–Ω—É—Ç, –Ω–æ –±–æ—Ç –Ω–µ —É—Å–ø–µ–ª –∑–∞–∫—Ä—ã—Ç—å!
```

**–ë–µ–∑ TP –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ MT5, –±–æ—Ç –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–±—ã–ª—å!**

---

## ‚úÖ –†–ï–®–ï–ù–ò–Ø

### –†–ï–®–ï–ù–ò–ï #1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TP –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ MT5 ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ MT5 –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –ú–ì–ù–û–í–ï–ù–ù–û –ø—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏ TP
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–ø—É—Å–∫–æ–≤ –∏–∑-–∑–∞ –∑–∞–¥–µ—Ä–∂–µ–∫
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –±–æ—Ç —É–ø–∞–ª –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏–ª—Å—è
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå MT5 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ TP
- ‚ùå –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pending orders –¥–ª—è TP2, TP3
- ‚ùå –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è TP1:**
```python
# –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TP1 –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
result = self.send_market_order(
    symbol=self.symbol,
    order_type=order_type,
    volume=lot_size,
    sl=stop_loss,
    tp=tp1_price,  # ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TP1 –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!
    comment=f"V9_{direction}_{regime}"
)

# –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–æ–∑–¥–∞—Ç—å pending orders –¥–ª—è TP2 –∏ TP3
# (–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** MT5 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç partial close —á–µ—Ä–µ–∑ TP –Ω–∞–ø—Ä—è–º—É—é.

---

### –†–ï–®–ï–ù–ò–ï #2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ) ‚≠ê

**–ò–∑–º–µ–Ω–∏—Ç—å `elif` –Ω–∞ `if` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –í–°–ï–• TP:**

```python
# –¢–ï–ö–£–©–ò–ô –ö–û–î (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
if direction == 'LONG':
    if not position['tp3_hit'] and current_price >= position['tp3_price']:
        self.execute_partial_close(position, self.close_pct3, 'TP3')
        position['tp3_hit'] = True

    elif not position['tp2_hit'] and current_price >= position['tp2_price']:  # ‚Üê elif
        self.execute_partial_close(position, self.close_pct2, 'TP2')
        position['tp2_hit'] = True

    elif not position['tp1_hit'] and current_price >= position['tp1_price']:  # ‚Üê elif
        self.execute_partial_close(position, self.close_pct1, 'TP1')
        position['tp1_hit'] = True

# –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ö–û–î (–ü–†–ê–í–ò–õ–¨–ù–û):
if direction == 'LONG':
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º TP1 –ü–ï–†–í–´–ú (—Å–∞–º—ã–π –±–ª–∏–∑–∫–∏–π)
    if not position['tp1_hit'] and current_price >= position['tp1_price']:
        print(f"üéØ TP1 HIT! Closing {self.close_pct1*100:.0f}%")
        self.execute_partial_close(position, self.close_pct1, 'TP1')
        position['tp1_hit'] = True

        # –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å trailing stop
        new_sl = position['entry_price'] + position['trailing_distance']
        self.modify_position(ticket, sl=new_sl)
        position['stop_loss'] = new_sl

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º TP2 (–µ—Å–ª–∏ TP1 —É–∂–µ –∑–∞–∫—Ä—ã—Ç)
    if not position['tp2_hit'] and current_price >= position['tp2_price']:  # ‚Üê if, –Ω–µ elif!
        print(f"üéØ TP2 HIT! Closing {self.close_pct2*100:.0f}%")
        self.execute_partial_close(position, self.close_pct2, 'TP2')
        position['tp2_hit'] = True

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º TP3 (–µ—Å–ª–∏ TP2 —É–∂–µ –∑–∞–∫—Ä—ã—Ç)
    if not position['tp3_hit'] and current_price >= position['tp3_price']:  # ‚Üê if, –Ω–µ elif!
        print(f"üéØ TP3 HIT! Closing remaining {self.close_pct3*100:.0f}%")
        self.execute_partial_close(position, self.close_pct3, 'TP3')
        position['tp3_hit'] = True
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ if –≤–º–µ—Å—Ç–æ elif)
- ‚úÖ –ó–∞ –æ–¥–Ω—É –ø—Ä–æ–≤–µ—Ä–∫—É –º–æ–≥—É—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å –í–°–ï TP
- ‚úÖ –ù–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –Ω–∏ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –í—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É (–º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ—Ç–∫–∞—Ç—ã)

---

### –†–ï–®–ï–ù–ò–ï #3: –£–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–æ–∫

**–ò–∑–º–µ–Ω–∏—Ç—å sleep —Å 60 —Å–µ–∫—É–Ω–¥ –Ω–∞ 5-10 —Å–µ–∫—É–Ω–¥:**

```python
def monitor_positions_loop(self):
    """Monitor open positions continuously"""
    while self.position_monitor_running:
        try:
            with self.open_positions_lock:
                if len(self.open_positions) == 0:
                    time.sleep(10)  # –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–∑–∏—Ü–∏–π - —Å–ø–∞—Ç—å 10 —Å–µ–∫
                    continue

                for position in self.open_positions[:]:
                    self.check_position(position)

            time.sleep(5)  # ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 60!
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–µ–Ω—å—à–µ —à–∞–Ω—Å–æ–≤ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å TP
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ë–æ–ª—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU
- ‚ö†Ô∏è –ë–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ MT5

---

## üéØ –ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### ‚≠ê –ü—Ä–∏–º–µ–Ω–∏—Ç—å –†–ï–®–ï–ù–ò–ï #2 + –†–ï–®–ï–ù–ò–ï #3

**–®–∞–≥ 1:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ (if –≤–º–µ—Å—Ç–æ elif)
**–®–∞–≥ 2:** –£–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–æ 5-10 —Å–µ–∫—É–Ω–¥

**–ü–æ—á–µ–º—É:**
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- ‚úÖ –ù–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –Ω–∏ –æ–¥–∏–Ω TP
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã
- ‚úÖ –ù–∞–¥—ë–∂–Ω–µ–µ —á–µ–º 1 –º–∏–Ω—É—Ç–∞

---

## üìä –¢–µ–∫—É—â–∏–µ —Ä–∏—Å–∫–∏

### –†–∏—Å–∫ 1: –ë—ã—Å—Ç—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ (1 –º–∏–Ω—É—Ç–∞ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏)
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ü—Ä–æ–ø—É—Å–∫ TP1 –∏–ª–∏ TP2

### –†–∏—Å–∫ 2: –û—Ç–∫–∞—Ç –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (–Ω–∞ H1 —Ä–µ–¥–∫–æ –±—ã–≤–∞–µ—Ç)
**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ü—Ä–æ–ø—É—Å–∫ –ø—Ä–∏–±—ã–ª–∏

### –†–∏—Å–∫ 3: –ë–æ—Ç —É–ø–∞–ª –∏–ª–∏ –∑–∞–≤–∏—Å
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** ‚ùå –ö–†–ò–¢–ò–ß–ù–û - TP –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—é—Ç –≤–æ–æ–±—â–µ! SL –∑–∞—â–∏—Ç–∏—Ç –æ—Ç —É–±—ã—Ç–∫–æ–≤, –Ω–æ TP –ø–æ—Ç–µ—Ä—è–Ω—ã.

**–ó–∞—â–∏—Ç–∞:** –¢–æ–ª—å–∫–æ SL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —É–±—ã—Ç–∫–æ–≤. TP - –Ω–µ—Ç –∑–∞—â–∏—Ç—ã!

---

## üîß –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?

### –í–∞—Ä–∏–∞–Ω—Ç A: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (5 –º–∏–Ω—É—Ç)

```python
# –í —Ñ–∞–π–ª–µ live_bot_mt5_fullauto.py, —Å—Ç—Ä–æ–∫–∞ 602-634
# –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É TP:

if direction == 'LONG':
    # TP1 - –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–≤—ã–º
    if not position['tp1_hit'] and current_price >= position['tp1_price']:
        print(f"üéØ TP1 HIT! Closing {self.close_pct1*100:.0f}%")
        self.execute_partial_close(position, self.close_pct1, 'TP1')
        position['tp1_hit'] = True
        new_sl = position['entry_price'] + position['trailing_distance']
        self.modify_position(ticket, sl=new_sl)
        position['stop_loss'] = new_sl

    # TP2 - –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ (if, –Ω–µ elif!)
    if not position['tp2_hit'] and current_price >= position['tp2_price']:
        print(f"üéØ TP2 HIT! Closing {self.close_pct2*100:.0f}%")
        self.execute_partial_close(position, self.close_pct2, 'TP2')
        position['tp2_hit'] = True

    # TP3 - –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
    if not position['tp3_hit'] and current_price >= position['tp3_price']:
        print(f"üéØ TP3 HIT! Closing remaining {self.close_pct3*100:.0f}%")
        self.execute_partial_close(position, self.close_pct3, 'TP3')
        position['tp3_hit'] = True

# –¢–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è SHORT
```

**–ò –≤ —Å—Ç—Ä–æ–∫–µ 552 –∏–∑–º–µ–Ω–∏—Ç—å:**
```python
time.sleep(5)  # –í–º–µ—Å—Ç–æ 60 —Å–µ–∫—É–Ω–¥ - –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
```

---

### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ TP –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

–≠—Ç–æ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞, —Ç—Ä–µ–±—É–µ—Ç:
1. –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pending orders –¥–ª—è partial close
3. –ë–æ–ª—å—à–µ –∫–æ–¥–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –ù–ï –¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å.** –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç A.

---

## ‚ùì –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã

> live –∫–æ–¥ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞–∂–¥—ã–π —á–∞—Å

**–ù–µ —Å–æ–≤—Å–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** –î–≤–∞ –ø–æ—Ç–æ–∫–∞:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ **–Ω–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤** - –∫–∞–∂–¥—ã–π —á–∞—Å
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ **–æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π** - –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É (–ù–ï —á–∞—Å!)

> –µ—Å–ª–∏ –∫–∞–∫–∏–µ —Ç–ø —É–∂–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏ –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–æ–º —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –ø–æ–∑–∂–µ

**–û—Ç–≤–µ—Ç:** ‚ùå –ù–ï –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
- –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- –ï—Å–ª–∏ TP –¥–æ—Å—Ç–∏–≥–Ω—É—Ç - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ
- –ù–æ –µ—Å–ª–∏ —Ü–µ–Ω–∞ –ø—Ä–æ—à–ª–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ TP –∑–∞ 1 –º–∏–Ω—É—Ç—É - –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å!

> –∏–ª–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —É–∂–µ –±—É–¥—É—Ç —Å–ª —Ç–ø —É—Ä–æ–≤–Ω–∏

**–û—Ç–≤–µ—Ç:**
- ‚úÖ SL - –î–ê, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ MT5 —Å—Ä–∞–∑—É
- ‚ùå TP - –ù–ï–¢, –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ! –ë–æ—Ç —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ä—É—á–Ω—É—é

---

## üö® –ö–†–ò–¢–ò–ß–ù–û: –ß—Ç–æ –µ—Å–ª–∏ –±–æ—Ç —É–ø–∞–¥—ë—Ç?

**–ï—Å–ª–∏ –±–æ—Ç —É–ø–∞–¥—ë—Ç –∏–ª–∏ –∑–∞–≤–∏—Å–Ω–µ—Ç:**
- ‚úÖ SL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –∑–∞—â–∏—Ç–∏—Ç –æ—Ç —É–±—ã—Ç–∫–æ–≤
- ‚ùå TP –ù–ï –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –ø—Ä–∏–±—ã–ª—å –ù–ï –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è!

**–ü–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç:**
- –î–æ–π—Ç–∏ –¥–æ TP3, –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∏ —É–¥–∞—Ä–∏—Ç—å—Å—è –≤ SL = —É–±—ã—Ç–æ–∫ –≤–º–µ—Å—Ç–æ –ø—Ä–∏–±—ã–ª–∏!

---

## üìû –•–æ—Ç–∏—Ç–µ —á—Ç–æ–±—ã —è –∏—Å–ø—Ä–∞–≤–∏–ª?

–ú–æ–≥—É —Å–¥–µ–ª–∞—Ç—å:
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ (if –≤–º–µ—Å—Ç–æ elif)
2. ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –¥–æ 5-10 —Å–µ–∫—É–Ω–¥
3. ‚úÖ –°–¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ –¥–ª—è SHORT –ø–æ–∑–∏—Ü–∏–π
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å

–ò—Å–ø—Ä–∞–≤–∏—Ç—å? üîß
