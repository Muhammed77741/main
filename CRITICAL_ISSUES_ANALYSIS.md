# üîç –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó: –£–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–Ø–î–û–ö –ü–†–û–í–ï–†–ö–ò TP

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
if exit_price >= pos['tp3_price'] and not pos['tp3_hit']:  # TP3 —Å–Ω–∞—á–∞–ª–∞
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º 20%

if exit_price >= pos['tp2_price'] and not pos['tp2_hit']:  # TP2 –ø–æ—Ç–æ–º
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º 30%

if exit_price >= pos['tp1_price'] and not pos['tp1_hit']:  # TP1 –ø–æ—Å–ª–µ–¥–Ω–∏–º
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º 50%
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: –†–µ–∑–∫–∏–π —Å–∫–∞—á–æ–∫ —Ü–µ–Ω—ã
10:00 - –û—Ç–∫—Ä—ã–ª–∏ LONG @ 2650
        TP1 = 2680 (50%)
        TP2 = 2700 (30%)
        TP3 = 2720 (20%)

10:05 - –ù–æ–≤–æ—Å—Ç–∏! –¶–µ–Ω–∞ —Å–∫–∞–∫–Ω—É–ª–∞ –¥–æ 2725!
        –ü—Ä–æ–≤–µ—Ä–∫–∞: exit_price = 2725

        ‚úÖ TP3 (2720) –¥–æ—Å—Ç–∏–≥–Ω—É—Ç ‚Üí –∑–∞–∫—Ä—ã–ª–∏ 20%
        ‚ùå TP2 (2700) –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è (—É–∂–µ > 2725)
        ‚ùå TP1 (2680) –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è (—É–∂–µ > 2725)

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ó–∞–∫—Ä—ã–ª–∏ —Ç–æ–ª—å–∫–æ 20%, –Ω–æ –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –∑–∞–∫—Ä—ã—Ç—å 100%!
```

**–ü–†–ê–í–ò–õ–¨–ù–û:**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –ü–†–Ø–ú–û–ú –ø–æ—Ä—è–¥–∫–µ
if exit_price >= pos['tp1_price'] and not pos['tp1_hit']:  # TP1 —Å–Ω–∞—á–∞–ª–∞
    pos['tp1_hit'] = True
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º 50%

if exit_price >= pos['tp2_price'] and not pos['tp2_hit']:  # TP2 –ø–æ—Ç–æ–º
    pos['tp2_hit'] = True
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º 30%

if exit_price >= pos['tp3_price'] and not pos['tp3_hit']:  # TP3 –ø–æ—Å–ª–µ–¥–Ω–∏–º
    pos['tp3_hit'] = True
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º 20%
```

**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –ü–æ—Ç–µ—Ä—è 50-80% –ø—Ä–∏–±—ã–ª–∏ –ø—Ä–∏ —Ä–µ–∑–∫–∏—Ö –¥–≤–∏–∂–µ–Ω–∏—è—Ö! üî•

---

### 2. ‚ùå –ù–ï–¢ BREAKEVEN –ü–û–°–õ–ï TP1

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
# –ü–æ—Å–ª–µ TP1 SL –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ
if tp1_hit:
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º 50%
    # SL = –∏—Å—Ö–æ–¥–Ω—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, -109 –ø—É–Ω–∫—Ç–æ–≤) ‚ùå
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
10:00 - –û—Ç–∫—Ä—ã–ª–∏ LONG @ 2650, SL = 2541 (-109–ø)
10:15 - TP1 @ 2680 —Å—Ä–∞–±–æ—Ç–∞–ª (+30–ø) ‚Üí –∑–∞–∫—Ä—ã–ª–∏ 50%
10:30 - –¶–µ–Ω–∞ –æ—Ç–∫–∞—Ç–∏–ª–∞—Å—å –∫ 2545
10:35 - SL @ 2541 —Å—Ä–∞–±–æ—Ç–∞–ª ‚ùå

–†–µ–∑—É–ª—å—Ç–∞—Ç:
  TP1: +30–ø √ó 50% = +15–ø
  SL:  -109–ø √ó 50% = -54.5–ø
  –ò—Ç–æ–≥–æ: -39.5–ø (–£–ë–´–¢–û–ö!) ‚ùå
```

**–ü–†–ê–í–ò–õ–¨–ù–û (—Å breakeven):**
```python
if tp1_hit and not breakeven_moved:
    # –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å SL –≤ –±–µ–∑—É–±—ã—Ç–æ–∫ (–∏–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –≤—ã—à–µ)
    pos['stop_loss'] = pos['entry_price'] + 5  # Breakeven + 5–ø
    pos['breakeven_moved'] = True
```

**–° breakeven:**
```
10:00 - –û—Ç–∫—Ä—ã–ª–∏ LONG @ 2650, SL = 2541
10:15 - TP1 @ 2680 —Å—Ä–∞–±–æ—Ç–∞–ª ‚Üí –∑–∞–∫—Ä—ã–ª–∏ 50%
        ‚Üí SL –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ –Ω–∞ 2655 (breakeven + 5–ø) ‚úÖ
10:30 - –¶–µ–Ω–∞ –æ—Ç–∫–∞—Ç–∏–ª–∞—Å—å –∫ 2545
        ‚Üí SL –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª (–Ω—É–∂–Ω–æ 2655)
10:45 - –¶–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –¥–æ 2700
        ‚Üí TP2 —Å—Ä–∞–±–æ—Ç–∞–ª! ‚úÖ

–†–µ–∑—É–ª—å—Ç–∞—Ç:
  TP1: +30–ø √ó 50% = +15–ø
  TP2: +50–ø √ó 30% = +15–ø
  –ò—Ç–æ–≥–æ: +30–ø (–ü–†–ò–ë–´–õ–¨!) ‚úÖ
```

**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –ó–∞—â–∏—Ç–∞ 50% –ø—Ä–∏–±—ã–ª–∏, —É–º–µ–Ω—å—à–µ–Ω–∏–µ —É–±—ã—Ç–∫–æ–≤ –Ω–∞ 20-30%

---

### 3. ‚ùå –ù–ï–¢ –£–ß–ï–¢–ê –°–ü–†–ï–î–ê –ü–†–ò –í–•–û–î–ï

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
# –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ close price
entry_price = signal['entry_price']  # –ù–∞–ø—Ä–∏–º–µ—Ä, 2650

# –õ–û–ù–ì
position = {
    'entry_price': 2650,  # ‚ùå –ù–µ—Ä–µ–∞–ª—å–Ω–æ!
    'tp1_price': 2680,
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–†–µ–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:
  Close price: 2650
  Bid: 2649.5   (–¥–ª—è –ø—Ä–æ–¥–∞–∂–∏)
  Ask: 2651.5   (–¥–ª—è –ø–æ–∫—É–ø–∫–∏)
  Spread: 2 –ø—É–Ω–∫—Ç–∞

LONG @ ASK:
  –†–µ–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥: 2651.5 (–Ω–µ 2650!)
  TP1: 2680
  –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: 2680 - 2651.5 = 28.5–ø (–Ω–µ 30–ø!)
  –ü–æ—Ç–µ—Ä—è: 1.5–ø (5%)

SHORT @ BID:
  –†–µ–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥: 2649.5 (–Ω–µ 2650!)
  TP1: 2620
  –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: 2649.5 - 2620 = 29.5–ø (–Ω–µ 30–ø!)
  –ü–æ—Ç–µ—Ä—è: 0.5–ø (1.7%)
```

**–î–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ –µ—â–µ —Ö—É–∂–µ:**
```
TP1 = 5 –ø—É–Ω–∫—Ç–æ–≤
–°–ø—Ä–µ–¥ = 2 –ø—É–Ω–∫—Ç–∞
–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å = 3 –ø—É–Ω–∫—Ç–∞ (–ø–æ—Ç–µ—Ä—è 40%!) üî•
```

**–ü–†–ê–í–ò–õ–¨–ù–û:**
```python
# –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π bid/ask
price = self.get_current_price()

if direction == 'LONG':
    entry_price = price['ask']  # –ü–æ–∫—É–ø–∞–µ–º –ø–æ ASK
else:
    entry_price = price['bid']  # –ü—Ä–æ–¥–∞–µ–º –ø–æ BID
```

**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –ë—ç–∫—Ç–µ—Å—Ç –∑–∞–≤—ã—à–µ–Ω –Ω–∞ 5-40% (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ø—Ä–µ–¥–∞ –∏ TP)

---

### 4. ‚ùå –ú–û–ñ–ù–û –û–¢–ö–†–´–¢–¨ –ù–ï–°–ö–û–õ–¨–ö–û –ü–û–ó–ò–¶–ò–ô –û–î–ù–û–í–†–ï–ú–ï–ù–ù–û

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
def check_for_signals(self):
    # –ò—â–µ–º —Å–∏–≥–Ω–∞–ª—ã
    last_signal = df_signals.iloc[-1]

    # –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
    self.open_position(last_signal)  # ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
10:00 - –ù–∞—à–ª–∏ —Å–∏–≥–Ω–∞–ª LONG ‚Üí –æ—Ç–∫—Ä—ã–ª–∏ –ø–æ–∑–∏—Ü–∏—é #1
11:00 - –ù–∞—à–ª–∏ –µ—â–µ —Å–∏–≥–Ω–∞–ª LONG ‚Üí –æ—Ç–∫—Ä—ã–ª–∏ –ø–æ–∑–∏—Ü–∏—é #2 ‚ùå
12:00 - –ù–∞—à–ª–∏ –µ—â–µ —Å–∏–≥–Ω–∞–ª SHORT ‚Üí –æ—Ç–∫—Ä—ã–ª–∏ –ø–æ–∑–∏—Ü–∏—é #3 ‚ùå

–†–µ–∑—É–ª—å—Ç–∞—Ç: 3 –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏! –†–∏—Å–∫ —É—Ç—Ä–æ–µ–Ω!
```

**–ü–†–ê–í–ò–õ–¨–ù–û:**
```python
def check_for_signals(self):
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
    if len(self.open_positions) > 0:
        print("‚ö†Ô∏è  Already have open position, skipping signal")
        return

    # –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∏—Å–∫ —Å–∏–≥–Ω–∞–ª–æ–≤...
```

**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –†–∏—Å–∫ –ø–µ—Ä–µ—Ç—Ä–µ–π–¥–∏–Ω–≥–∞, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–±—ã—Ç–∫–∏

---

### 5. ‚ùå –ù–ï–¢ –î–ù–ï–í–ù–´–• –õ–ò–ú–ò–¢–û–í

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
# –ë–æ—Ç –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –ø–æ–∑–∏—Ü–∏–π –≤ –¥–µ–Ω—å
while True:
    check_for_signals()  # –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ ‚ùå
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ü–ª–æ—Ö–æ–π –¥–µ–Ω—å:
09:00 - –û—Ç–∫—Ä—ã–ª–∏, SL (-2%)
10:00 - –û—Ç–∫—Ä—ã–ª–∏, SL (-2%)
11:00 - –û—Ç–∫—Ä—ã–ª–∏, SL (-2%)
12:00 - –û—Ç–∫—Ä—ã–ª–∏, SL (-2%)
13:00 - –û—Ç–∫—Ä—ã–ª–∏, SL (-2%)

–†–µ–∑—É–ª—å—Ç–∞—Ç: -10% –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å! üî•
```

**–ü–†–ê–í–ò–õ–¨–ù–û:**
```python
# –õ–∏–º–∏—Ç—ã
MAX_TRADES_PER_DAY = 5
MAX_LOSS_PER_DAY = -3.0  # %
MAX_CONSECUTIVE_LOSSES = 3

def check_daily_limits(self):
    today_trades = [t for t in self.closed_trades
                    if t['exit_time'].date() == datetime.now().date()]

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
    if len(today_trades) >= MAX_TRADES_PER_DAY:
        print("‚ö†Ô∏è  Daily trade limit reached")
        return False

    daily_pnl = sum([t['pnl_pct'] for t in today_trades])
    if daily_pnl <= MAX_LOSS_PER_DAY:
        print("üõë Daily loss limit reached, stopping trading")
        return False

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–∏–∏ —É–±—ã—Ç–∫–æ–≤
    recent_5 = self.closed_trades[-5:]
    if all(t['pnl_pct'] < 0 for t in recent_5):
        print("üõë 5 losses in a row, stopping")
        return False

    return True
```

**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –ó–∞—â–∏—Ç–∞ –∫–∞–ø–∏—Ç–∞–ª–∞, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ç–µ—Ä—å

---

### 6. ‚ùå –ù–ï–¢ –ö–û–ú–ò–°–°–ò–ô –ò –°–í–û–ü–ê –í –ë–≠–ö–¢–ï–°–¢–ï

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
# –°—á–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ –¥–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã
pnl_pct = ((exit_price - entry_price) / entry_price) * 100
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–†–µ–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è:
  –ü—Ä–∏–±—ã–ª—å: +30 –ø—É–Ω–∫—Ç–æ–≤
  –°–ø—Ä–µ–¥: -2 –ø—É–Ω–∫—Ç–∞ (–≤—Ö–æ–¥)
  –°–ø—Ä–µ–¥: -2 –ø—É–Ω–∫—Ç–∞ (–≤—ã—Ö–æ–¥)
  –ö–æ–º–∏—Å—Å–∏—è: -1 –ø—É–Ω–∫—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±—Ä–æ–∫–µ—Ä–∞)
  –°–≤–æ–ø: -0.5 –ø—É–Ω–∫—Ç–∞ (–µ—Å–ª–∏ –¥–µ—Ä–∂–∏–º >1 –¥–µ–Ω—å)

  –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: 30 - 2 - 2 - 1 - 0.5 = 24.5–ø (–Ω–∞ 18% –º–µ–Ω—å—à–µ!)
```

**–î–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞:**
```
TP1 = 5 –ø—É–Ω–∫—Ç–æ–≤
–°–ø—Ä–µ–¥ –≤—Ö–æ–¥: -2–ø
–°–ø—Ä–µ–¥ –≤—ã—Ö–æ–¥: -2–ø
–ö–æ–º–∏—Å—Å–∏—è: -0.5–ø
–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: 5 - 2 - 2 - 0.5 = 0.5–ø (–ø–æ—Ç–µ—Ä—è 90%!) üî•
```

**–ü–†–ê–í–ò–õ–¨–ù–û:**
```python
def calculate_pnl_with_costs(self, entry, exit, direction, duration_hours):
    # –î–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã
    if direction == 'LONG':
        price_pnl = exit - entry
    else:
        price_pnl = entry - exit

    # –í—ã—á–µ—Å—Ç—å —Å–ø—Ä–µ–¥ (–ø—Ä–∏ –≤—Ö–æ–¥–µ —É–∂–µ —É—á—Ç–µ–Ω, –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ —Ç–æ–∂–µ)
    spread = self.get_average_spread()  # –ù–∞–ø—Ä–∏–º–µ—Ä, 2 –ø—É–Ω–∫—Ç–∞
    price_pnl -= spread  # –°–ø—Ä–µ–¥ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

    # –í—ã—á–µ—Å—Ç—å –∫–æ–º–∏—Å—Å–∏—é
    commission = 0.5  # –ü—É–Ω–∫—Ç—ã –Ω–∞ –ª–æ—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±—Ä–æ–∫–µ—Ä–∞)
    price_pnl -= commission

    # –í—ã—á–µ—Å—Ç—å —Å–≤–æ–ø (–µ—Å–ª–∏ –¥–µ—Ä–∂–∞–ª–∏ >24—á)
    if duration_hours > 24:
        days = duration_hours / 24
        swap_per_day = -0.3  # –ü—É–Ω–∫—Ç—ã –≤ –¥–µ–Ω—å (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±—Ä–æ–∫–µ—Ä–∞)
        price_pnl += swap_per_day * days

    pnl_pct = (price_pnl / entry) * 100
    return pnl_pct
```

**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –ë—ç–∫—Ç–µ—Å—Ç –∑–∞–≤—ã—à–µ–Ω –Ω–∞ 10-90% (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞!)

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 7. –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ñ–∞–π–ª

```python
# –¢–æ–ª—å–∫–æ print
print("Position opened")  # ‚ùå –ü–æ—Ç–µ—Ä—è–µ—Ç—Å—è –µ—Å–ª–∏ –∫—Ä–∞—à–Ω–µ—Ç—Å—è
```

**–ù—É–∂–Ω–æ:**
```python
import logging

logging.basicConfig(
    filename='trading_bot.log',
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)

logger.info("Position opened: LONG @ 2650")
```

### 8. –ù–µ—Ç reconnect –¥–ª—è MT5

```python
# –ï—Å–ª–∏ MT5 –æ—Ç–∫–ª—é—á–∏—Ç—Å—è, –±–æ—Ç —É–ø–∞–¥–µ—Ç
df = mt5.copy_rates_from_pos(...)  # ‚ùå –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å None
```

**–ù—É–∂–Ω–æ:**
```python
def download_with_retry(self, max_retries=3):
    for attempt in range(max_retries):
        try:
            df = mt5.copy_rates_from_pos(...)
            if df is not None:
                return df
        except:
            if attempt < max_retries - 1:
                self.reconnect_mt5()
                time.sleep(5)
    return None
```

### 9. –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã—Ö–æ–¥–Ω—ã—Ö

```python
# Forex –∑–∞–∫—Ä—ã—Ç –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ
# MT5 –º–æ–∂–µ—Ç –Ω–µ –¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
```

**–ù—É–∂–Ω–æ:**
```python
def is_market_open(self):
    now = datetime.now()
    # Forex –∑–∞–∫—Ä—ã—Ç –°–±/–í—Å
    if now.weekday() >= 5:  # 5=–°—É–±–±–æ—Ç–∞, 6=–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
        return False
    # Forex –æ—Ç–∫—Ä—ã—Ç ~22:00 –í—Å –¥–æ ~22:00 –ü—Ç (GMT)
    return True
```

### 10. –ù–µ–ø–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```python
# –ù–µ—Ç –≤–∞–∂–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫:
# - Sharpe Ratio
# - Profit Factor
# - Max consecutive losses
# - Recovery Factor
# - Expectancy
```

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï: –¢–µ–∫—É—â–∏–π vs –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç

### –ü—Ä–∏–º–µ—Ä —Å–¥–µ–ª–∫–∏:

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–∏–π (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ) | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π |
|---------|----------------------|------------|
| **–í—Ö–æ–¥** | 2650.00 | 2651.50 (ASK + —Å–ø—Ä–µ–¥) |
| **–í—ã—Ö–æ–¥** | 2680.00 | 2678.50 (BID - —Å–ø—Ä–µ–¥) |
| **–î–≤–∏–∂–µ–Ω–∏–µ** | +30–ø | +27–ø |
| **–ö–æ–º–∏—Å—Å–∏—è** | 0–ø ‚ùå | -0.5–ø |
| **–°–≤–æ–ø** | 0–ø ‚ùå | -0.3–ø (–µ—Å–ª–∏ 1+ –¥–µ–Ω—å) |
| **–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å** | +30–ø | +26.2–ø |
| **–ó–∞–≤—ã—à–µ–Ω–∏–µ** | +14.5% üî• | –†–µ–∞–ª—å–Ω–æ |

### –î–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ (TP=5–ø):

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–∏–π | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π |
|---------|---------|------------|
| **TP** | 5–ø | 5–ø |
| **–°–ø—Ä–µ–¥ –≤—Ö–æ–¥** | 0–ø ‚ùå | -2–ø |
| **–°–ø—Ä–µ–¥ –≤—ã—Ö–æ–¥** | 0–ø ‚ùå | -2–ø |
| **–ö–æ–º–∏—Å—Å–∏—è** | 0–ø ‚ùå | -0.5–ø |
| **–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å** | +5–ø | +0.5–ø |
| **–ó–∞–≤—ã—à–µ–Ω–∏–µ** | +900%! üî•üî•üî• | –†–µ–∞–ª—å–Ω–æ |

---

## üõ†Ô∏è –ü–†–ò–û–†–ò–¢–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ö–†–ò–¢–ò–ß–ù–û (—Å—Ä–æ—á–Ω–æ):
1. ‚úÖ –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ TP (–ø—Ä—è–º–æ–π, –Ω–µ –æ–±—Ä–∞—Ç–Ω—ã–π)
2. ‚úÖ Breakeven –ø–æ—Å–ª–µ TP1
3. ‚úÖ –£—á–µ—Ç —Å–ø—Ä–µ–¥–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ/–≤—ã—Ö–æ–¥–µ
4. ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

### –í–ê–ñ–ù–û (—Å–∫–æ—Ä–æ):
5. ‚ö†Ô∏è –ö–æ–º–∏—Å—Å–∏–∏ –∏ —Å–≤–æ–ø—ã –≤ –±—ç–∫—Ç–µ—Å—Ç–µ
6. ‚ö†Ô∏è –î–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã
7. ‚ö†Ô∏è –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª

### –ñ–ï–õ–ê–¢–ï–õ–¨–ù–û:
8. üí° MT5 reconnect
9. üí° –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö
10. üí° –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

## üí∞ –í–õ–ò–Ø–ù–ò–ï –ù–ê –†–ï–ó–£–õ–¨–¢–ê–¢–´

### H1 —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (TP: 30/50/80–ø):
```
–¢–µ–∫—É—â–∏–π –±—ç–∫—Ç–µ—Å—Ç: +387.46%
–†–µ–∞–ª—å–Ω—ã–π (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏): ~+280-320%
–ó–∞–≤—ã—à–µ–Ω–∏–µ: ~20-35%
```

### –°–∫–∞–ª—å–ø–∏–Ω–≥ (TP: 5/10/15–ø):
```
–¢–µ–∫—É—â–∏–π –±—ç–∫—Ç–µ—Å—Ç: +2.62%
–†–µ–∞–ª—å–Ω—ã–π (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏): ~+0.5-1%
–ó–∞–≤—ã—à–µ–Ω–∏–µ: ~60-80% üî•
```

---

## ‚úÖ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. –°–æ–∑–¥–∞—Ç—å `paper_trading_v2.py` —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
2. –î–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç —Å–ø—Ä–µ–¥–∞, –∫–æ–º–∏—Å—Å–∏–π, —Å–≤–æ–ø–æ–≤
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å breakeven
4. –î–æ–±–∞–≤–∏—Ç—å –¥–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫—Ç–µ—Å—Ç—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ä–∞—Å—á–µ—Ç–∞–º–∏
6. –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- H1 —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø—Ä–∏–±—ã–ª—å–Ω–∞ (~+280%)
- –°–∫–∞–ª—å–ø–∏–Ω–≥: –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —É–±—ã—Ç–æ—á–Ω—ã–º –∏–ª–∏ –º–∞–ª–æ–ø—Ä–∏–±—ã–ª—å–Ω—ã–º
- –†–µ—à–µ–Ω–∏–µ –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞: —É–≤–µ–ª–∏—á–∏—Ç—å TP –∏–ª–∏ –∏—Å–∫–∞—Ç—å –±—Ä–æ–∫–µ—Ä–∞ —Å —É–∑–∫–∏–º —Å–ø—Ä–µ–¥–æ–º (<1–ø)

---

**–í—ã–≤–æ–¥:** –¢–µ–∫—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã **—Å–ª–∏—à–∫–æ–º –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã**. –†–µ–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –±—É–¥–µ—Ç –Ω–∞ 20-80% —Ö—É–∂–µ.
